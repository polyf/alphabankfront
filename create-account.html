<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
    <script src="https://kit.fontawesome.com/c657662054.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/alphastrap.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <title>Home - Alpha Bank</title>
</head>

<body style="height: 80vh;">
    <header>
        <div class="container-sm mt-4 mb-3">
            <nav class="row align-items-center d-flex justify-content-between">
                <div class="col">
                    <div class="d-flex align-items-center hand" onclick="redirecionarHome()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="37" viewBox="0 0 36 37" fill="none"
                            class="me-2">
                            <circle cx="18" cy="18.5" r="18" fill="url(#paint0_linear_10_506)" />
                            <defs>
                                <linearGradient id="paint0_linear_10_506" x1="18" y1="0.5" x2="18" y2="36.5"
                                    gradientUnits="userSpaceOnUse">
                                    <stop stop-color="#0160A0" />
                                    <stop offset="1" stop-color="#3687AD" />
                                </linearGradient>
                            </defs>
                        </svg>
                        <h2 class="mb-0">AlphaBank</h2>
                    </div>
                </div>
                <div class="col">
                    <ul class="nav">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Conta</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Serviços</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Sobre</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Blog</a>
                        </li>
                    </ul>
                </div>
                <div class="col">
                    <div class="d-flex align-items-center">
                        <div class="button m-3">
                            <i class="fa-regular fa-user fa-lg m-1"></i>
                            <span class="title-button-outlined">Área do Cliente</span>
                        </div>
                        <button type="button" class="btn btn-primary">Abrir Conta</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>
    <main class="container-sm">
        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="form-group col-md-5 justify-content-center">
                    <div class="d-flex justify-content-start mb-3">
                        <button type="button" class="btn btn-outline-primary btn-voltar"
                            onclick="mostrarEtapaAnterior()" disabled>
                            <i class="fas fa-arrow-left"></i> Voltar
                        </button>
                    </div>
                    <form>
                        <div class="etapa" id="etapa1">
                            <div class="row justify-content-center">
                                <div class="form-row">
                                    <h4>PASSO 1</h4>
                                    <h5>Dados da Empresa</h5>
                                    <span>Queremos te conhecer melhor! Nos ajude fornecendo informações importantes
                                        sobre a sua organização.</span>
                                    <br><br>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="cnpj">CNPJ</label>
                                        <input type="text" class="form-control" id="cnpj" placeholder="CNPJ" required>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="razaoSocial">Razão Social</label>
                                        <input type="text" class="form-control" id="razaoSocial"
                                            placeholder="Razão Social" required>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="nomeFantasia">Nome Fantasia</label>
                                        <input type="text" class="form-control" id="nomeFantasia"
                                            placeholder="Nome Fantasia" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="porte">Porte</label>
                                        <select class="form-control" id="porte" required>
                                            <option value="">Selecione</option>
                                            <option value="0">Microempresa</option>
                                            <option value="1">Pequena</option>
                                            <option value="2">Média</option>
                                            <option value="3">Grande</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="d-grid">
                                    <button type="button" class="btn btn-primary btn-continuar"
                                        onclick="mostrarProximaEtapa()">Continuar <i
                                            class="fas fa-arrow-right"></i></button>
                                </div>
                            </div>
                        </div>

                        <!-- Etapa 2 -->
                        <div class="etapa" id="etapa2" style="display: none;">
                            <div class="row justify-content-center">
                                <div class="form-row">
                                    <h4>PASSO 2</h4>
                                    <h5>Endereço</h5>
                                    <span>Agora, forneça o endereço completo da sua empresa. Essa informação é
                                        importante para o envio de avisos e comunicações.</span>
                                    <br><br>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="cep">CEP</label>
                                        <input type="text" class="form-control" id="cep" placeholder="CEP" required>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group col-md-12">
                                            <label for="estado">Estado</label>
                                            <select class="form-control" id="estado" required>
                                                <option value="">Selecione</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="rua">Rua</label>
                                        <input type="text" class="form-control" id="rua" placeholder="Rua" required>
                                    </div>
                                </div>
                                <div class="form-row row" style="padding-left: 0; padding-right: 0;">
                                    <div class="col-md-6">
                                        <label for="numero">Número</label>
                                        <input type="text" class="form-control" id="numero" placeholder="Número"
                                            required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="complemento">Complemento</label>
                                        <input type="text" class="form-control" id="complemento"
                                            placeholder="Complemento" required>
                                    </div>
                                </div>
                                <div class="form-row row" style="padding-left: 0; padding-right: 0;">
                                    <div class="form-group col-md-6">
                                        <label for="bairro">Bairro</label>
                                        <input type="text" class="form-control" id="bairro" placeholder="Bairro"
                                            required>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="cidade">Cidade</label>
                                        <select class="form-control" id="cidade" required disabled>
                                            <option value="">Selecione</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="d-grid">
                                    <button type="button" class="btn btn-primary btn-continuar"
                                        onclick="mostrarProximaEtapa()">Continuar <i
                                            class="fas fa-arrow-right"></i></button>
                                </div>
                            </div>
                        </div>

                        <!-- Etapa 3 -->
                        <div class="etapa" id="etapa3" style="display: none;">
                            <div class="row justify-content-center">
                                <div class="form-row">
                                    <h4>PASSO 3</h4>
                                    <h5>Informações de Contato</h5>
                                    <span>Para facilitar nosso contato, forneça informações de contato da sua
                                        empresa!</span>
                                    <br><br>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <label for="telefone">Telefone</label>
                                        <input type="text" class="form-control" id="telefone" placeholder="Telefone"
                                            required>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="whatsapp">Whatsapp</label>
                                        <input type="text" class="form-control" id="whatsapp" placeholder="Whatsapp"
                                            required>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="email">E-mail</label>
                                        <input type="email" class="form-control" id="email" placeholder="E-mail"
                                            required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-12">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="autorizarComunicacoes">
                                            <label class="form-check-label" for="autorizarComunicacoes">
                                                Autorizo o recebimento de comunicações via e-mail, telefone e SMS
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="aceitarTermos">
                                            <label class="form-check-label" for="aceitarTermos">
                                                Aceito os Termos e Condições
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary mt-3">Enviar</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        </div>
    </main>
    <footer class="text-dark py-3">
        <div class="container text-center">
            © <strong>Alpha Bank.</strong> Todos os direitos reservados. 2024
        </div>
    </footer>
    <script>
        function redirecionarHome() {
            window.location.href = 'index.html';
        }

        document.addEventListener('DOMContentLoaded', function () {
            const selectEstado = document.getElementById('estado');
            const selectCidade = document.getElementById('cidade');

            // Evento de mudança no campo Estado
            selectEstado.addEventListener('change', function () {
                // Verifica se uma opção válida foi selecionada
                if (selectEstado.value) {
                    // Remove o atributo disabled do campo Cidade
                    selectCidade.removeAttribute('disabled');
                    carregaCidadesEstado(selectEstado.value);
                } else {
                    // Se nada estiver selecionado, desabilita o campo Cidade
                    selectCidade.setAttribute('disabled', 'disabled');
                }
            });
        });

        function carregaCidadesEstado(estado) {
            const selectCidade = document.getElementById('cidade');
            selectCidade.innerHTML = '';
            const apiUrl = 'http://localhost:8080/alpha-bank/api/brazil/' + estado + '/cities';

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    data.forEach(cidade => {
                        const option = document.createElement('option');
                        option.value = cidade.id; // ou outra propriedade que identifique a cidade
                        option.textContent = cidade.nome; // ou outra propriedade que contenha o nome da cidade
                        selectCidade.appendChild(option);
                    });
                })
                .catch(error => console.error('Erro ao obter dados da API:', error));

        }

        $(document).ready(function () {
            // Variável para controlar a etapa atual
            var etapaAtual = 1;

            // Função para mostrar a próxima etapa
            function mostrarProximaEtapa() {
                var camposPreenchidos = true;
                if (camposPreenchidos) {
                    $('#etapa' + etapaAtual).hide();
                    etapaAtual++;
                    mostrarEtapaAnteriorBotao(); // Adiciona a chamada para atualizar o botão "Voltar"
                    $('#etapa' + etapaAtual).show();
                } else {
                    alert('Por favor, preencha todos os campos antes de continuar.');
                }
            }

            // Função para mostrar a etapa anterior
            function mostrarEtapaAnterior() {
                if (etapaAtual > 1) {
                    $('#etapa' + etapaAtual).hide();
                    etapaAtual--;
                    mostrarEtapaAnteriorBotao();
                    $('#etapa' + etapaAtual).show();
                }
            }

            // Função para atualizar o estado do botão "Voltar"
            function mostrarEtapaAnteriorBotao() {
                if (etapaAtual > 1) {
                    $('.btn-voltar').prop('disabled', false);
                } else {
                    $('.btn-voltar').prop('disabled', true);
                }
            }

            // Adiciona um ouvinte de evento ao botão "Continuar"
            $('.btn-continuar').on('click', function () {
                mostrarProximaEtapa();
            });

            // Adiciona um ouvinte de evento ao botão "Voltar"
            $('.btn-voltar').on('click', function () {
                mostrarEtapaAnterior();
            });

            // Máscaras para os campos específicos
            $('#cnpj').mask('00.000.000/0000-00', { reverse: true });
            $('#telefone').mask('(00) 0000-0000');
            $('#whatsapp').mask('(00) 0 0000-0000');
        });

        document.addEventListener('DOMContentLoaded', function () {
            const selectEstado = document.getElementById('estado');
            const apiUrl = 'http://localhost:8080/alpha-bank/api/brazil/states';

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    data.forEach(estado => {
                        const option = document.createElement('option');
                        option.value = estado.sigla; // ou outra propriedade que identifique a cidade
                        option.textContent = estado.nome; // ou outra propriedade que contenha o nome da cidade
                        selectEstado.appendChild(option);
                    });
                })
                .catch(error => console.error('Erro ao obter dados da API:', error));
        });

        function limparMascara(cnpj) {
            // Remove pontos, barras e traços
            return cnpj.replace(/[./-]/g, '');
        }


        document.addEventListener('DOMContentLoaded', function () {
            // Adiciona um ouvinte de evento ao formulário
            document.querySelector('form').addEventListener('submit', function (event) {
                event.preventDefault(); // Evita que o formulário seja enviado da maneira padrão

                // Constrói o objeto com os dados do formulário
                const formData = {
                    id: 1,
                    companyLegalName: document.getElementById('razaoSocial').value,
                    businessName: document.getElementById('nomeFantasia').value,
                    companySize: document.getElementById('porte').value,
                    cnpj: limparMascara(document.getElementById('cnpj').value),
                    address: {
                        street: document.getElementById('rua').value,
                        number: document.getElementById('numero').value,
                        complement: document.getElementById('complemento').value,
                        neighborhood: document.getElementById('bairro').value,
                        city: document.getElementById('cidade').value,
                        state: document.getElementById('estado').value,
                        zipCode: document.getElementById('cep').value
                    },
                    contact: {
                        phone: document.getElementById('telefone').value,
                        whatsapp: document.getElementById('whatsapp').value,
                        email: document.getElementById('email').value
                    },
                    status: "PENDING"
                };

                // Configuração para a chamada fetch
                const requestOptions = {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                        // Adicione quaisquer cabeçalhos adicionais necessários aqui
                    },
                    body: JSON.stringify(formData)
                };

                // Faz a chamada fetch para o endpoint
                fetch('http://localhost:8080/alpha-bank/api/v1/company-accounts', requestOptions)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Erro ao enviar dados');
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Dados enviados com sucesso:', data);
                        window.location.href = 'sucess.html';
                        // Faça o que for necessário após o envio bem-sucedido
                    })
                    .catch(error => {
                        console.log(error);
                        console.error('Erro ao enviar dados:', error);
                        // Faça o que for necessário em caso de erro
                    });
            });
        });

    </script>



</body>

</html>